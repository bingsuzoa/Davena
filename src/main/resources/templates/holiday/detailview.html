<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{Layouts/contents}">
        
    <header layout:fragment="header">
		<th:block th:replace="~{fragments/header :: .miniheader}"></th:block>
	</header>
	<section layout:fragment="content">
		<div class="content d-flex">
			<nav>
				<div class="high-nav">
					<th:block th:replace="~{fragments/navbar :: .navbar}"></th:block>
				</div>
				<div class="low-nav">
					<th:block th:replace="~{fragments/navbar :: .low-navbar}"></th:block>
				</div>
			</nav>	
			<div class="calendar-detailview">
				<div id="calendar"></div>
			</div>
			<div>
				<div id="change-applyBtn"><a href="/holiday/before-apply-view">휴가 추가하기</a></div>
			</div>
		</div>
	</section>
	
	<script layout:fragment="script">
		document.addEventListener('DOMContentLoaded', function() {
			
			$(function(){
				var request = $.ajax({
					type:"post"
					,url:"/holiday/detail"
				});
				request.done(function(data){
					console.log(data);
    				var calendarEl = document.getElementById('calendar');
	    			var calendar = new FullCalendar.Calendar(calendarEl, {
	  				 	 initialDate: '2024-10-09'
	      				,initialView: 'dayGridMonth'
	      				,locale : 'ko'
	      				,selectable : false
	      				,droppable : true
	      				,headerToolbar: {
	         	 			 start:'title'
	          				,center:''
	          				,end:'prev,next'  
	       				}
	    				,events : [
	    					{
	    						title : 'davena'
	    						,start : '2019-08-12 00:00'
	    						,end : '2019-10-19 00:00'
	    						,extendedProps : {
	    							holidayId : 1
	    						}
	    					}
	    				]
	     		 		,dayCellContent:function(e){
	      					return e.dayNumberText.replace('일',''); 
	      				}
	     		 		,events : data
	     		 		,eventClick : function(info){
	     		 			var holidayId = info.event.extendProps;
	     		 			alert(holidayId);
	     		 			
	   		
	     		 		}
	    			}); 
	    			calendar.render();
				});
				request.fail(function(jqXHR, textStatus){
					alert(textStatus);
				})
			});
		});
				
			
	</script>
</html>